---
import ImageLightbox from './ImageLightbox.astro';
import ProjectCard from './ProjectCard.astro';
import ProjectDetailModal from './ProjectDetailModal.astro';
import { projects } from '../data/projects';
---

<section class="projects" id="projects">
  <h2>My <span class="enfasis-title">Projects</span></h2>
  <div class="projects-grid">
    {
      projects.map((project) => (
        <ProjectCard
          title={project.title}
          image={project.image}
          description={project.description}
          highlights={project.highlights}
          technologies={project.technologies}
          links={project.links}
          slug={project.slug}
        />
      ))
    }
  </div>
</section>

<!-- Pass projects data to client-side JS -->
<div id="projects-data" data-projects={JSON.stringify(projects)} style="display: none;"></div>

<script>
  // This script helps the ImageLightbox find the new elements if they are added dynamically,
  // though here they are server-rendered so standard DOMContentLoaded works fine.
</script>

<ImageLightbox />
<ProjectDetailModal />
